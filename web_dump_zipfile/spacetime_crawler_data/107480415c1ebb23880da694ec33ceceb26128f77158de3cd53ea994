¦Ifinal_url¡DtypeLhttp_headers¢DtypeEvalue‰¢Ak¢DtypeEvalueNContent-LengthAv¢DtypeEvalueE13997¢Ak¢DtypeEvalueJSet-CookieAv¢DtypeEvalueX°trac_form_token=a0c1d5572cec928eda5e639b; httponly; Path=/wiki/public, trac_session=cbe0647bcc9d6cf36aed7aa9; expires=Mon, 06 May 2019 21:43:52 GMT; httponly; Path=/wiki/public¢Ak¢DtypeEvalueGExpiresAv¢DtypeEvalueXFri, 01 Jan 1999 00:00:00 GMT¢Ak¢DtypeEvalueJKeep-AliveAv¢DtypeEvalueRtimeout=5, max=100¢Ak¢DtypeEvalueFServerAv¢DtypeEvalueX„Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips SVN/1.7.14 mod_wsgi/3.4 Python/2.7.5 Phusion_Passenger/4.0.53 mod_perl/2.0.10 Perl/v5.16.3¢Ak¢DtypeEvalueJConnectionAv¢DtypeEvalueJKeep-Alive¢Ak¢DtypeEvalueMCache-ControlAv¢DtypeEvalueOmust-revalidate¢Ak¢DtypeEvalueDDateAv¢DtypeEvalueXTue, 05 Feb 2019 21:43:52 GMT¢Ak¢DtypeEvalueLContent-TypeAv¢DtypeEvalueWtext/html;charset=utf-8Kraw_content¢DtypeEvalueY6­<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      cs222-2017-fall-command-line-interface â€“ Public
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/wiki/public/search" />
        <link rel="help" href="/wiki/public/wiki/TracGuide" />
        <link rel="alternate" href="/wiki/public/wiki/cs222-2017-fall-command-line-interface?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="tracwysiwyg.base" href="/wiki/public" />
        <link rel="start" href="/wiki/public/wiki" />
        <link rel="stylesheet" href="/wiki/public/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/wiki/public/chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="/wiki/public/chrome/tracwysiwyg/wysiwyg.css" type="text/css" />
        <link rel="tracwysiwyg.stylesheet" href="/wiki/public/chrome/common/css/trac.css" /><link rel="tracwysiwyg.stylesheet" href="/wiki/public/chrome/tracwysiwyg/editor.css" />
        <link rel="shortcut icon" href="/wiki/public/chrome/site/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/wiki/public/chrome/site/favicon.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
    <script type="text/javascript">
      var _tracwysiwyg={};
    </script>
      <script type="text/javascript" charset="utf-8" src="/wiki/public/chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="/wiki/public/chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="/wiki/public/chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="/wiki/public/chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="/wiki/public/chrome/common/js/folding.js"></script>
      <script type="text/javascript" charset="utf-8" src="/wiki/public/chrome/tracwysiwyg/wysiwyg.js"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://www.ics.uci.edu/"><img src="/wiki/public/chrome/site/ics.jpg" alt="ICS Logo" height="67" width="128" /></a>
      </div>
      <form id="search" action="/wiki/public/search" method="get">
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/wiki/public/login">Login</a></li><li><a href="/wiki/public/prefs">Preferences</a></li><li class="last"><a href="/wiki/public/about">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
  </div>
    <div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="View WikiStart" href="/wiki/public/wiki">wiki:</a><a class="pathentry" href="/wiki/public/wiki/cs222-2017-fall-command-line-interface" title="View cs222-2017-fall-command-line-interface">cs222-2017-fall-command-line-interface</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><a href="/wiki/public/wiki/WikiStart">Start Page</a></li><li><a href="/wiki/public/wiki/TitleIndex">Index</a></li><li class="last"><a href="/wiki/public/wiki/cs222-2017-fall-command-line-interface?action=history">History</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><div style="background-color:rgb(237,222,222)" class="wikipage"><p>
</p><div class="wiki-toc">
<ol>
  <li>
    <a href="#CommandLineInterfaceInterpreterforProject4">Command Line Interface Interpreter for Project4</a>
    <ol>
      <li>
        <a href="#Introduction">Introduction</a>
      </li>
      <li>
        <a href="#SupportedCommands">Supported Commands</a>
      </li>
      <li>
        <a href="#CommandExamples">Command Examples</a>
      </li>
      <li>
        <a href="#GettingandUsingCommandLineInterface">Getting and Using Command Line Interface</a>
      </li>
      <li>
        <a href="#Acknowledgement">Acknowledgement</a>
      </li>
    </ol>
  </li>
</ol>
</div><p>
</p>
<h1 id="CommandLineInterfaceInterpreterforProject4">Command Line Interface Interpreter for Project4</h1>
<p>
<br />
</p>
<h2 id="Introduction">Introduction</h2>
<p>
Command Line Interface (CLI) takes a SQL-like command and executes that command. 
CLI is laid on top of the Relation Manager (RM) and Query Engine (QE) layers in Project 4 so that each command is executed via the public methods of the RM and/or QE layers.
</p>
<h2 id="SupportedCommands">Supported Commands</h2>
<p>
The interpreter supports the following commands. 
</p>
<pre class="wiki">create catalog
create table &lt;tableName&gt; (col1 = &lt;type&gt;, col2 = &lt;type&gt;, ...)
    &lt;type&gt; = int | real | &lt;varchar&gt;
    &lt;varchar&gt; = "varchar(" &lt;length&gt; ")"

create index &lt;columnName&gt; on &lt;tableName&gt;

drop catalog
drop table &lt;tableName&gt;
drop index &lt;indexName&gt; on &lt;tableName&gt;
drop attribute &lt;attributeName&gt; from &lt;tableName&gt;

insert into &lt;tableName&gt; tuple(col1 = &lt;value1&gt;, col2 = &lt;value2&gt;, ...)

SELECT &lt;query&gt;
&lt;query&gt; = 
    PROJECT &lt;query&gt; GET "[" &lt;attrs&gt; "]"
    FILTER &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;value&gt;
    BNLJOIN &lt;query&gt;, &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;attr&gt; PAGES(&lt;numPages&gt;)
    INLJOIN &lt;query&gt;, &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;attr&gt;)
    GHJOIN &lt;query&gt;, &lt;query&gt; WHERE &lt;attr&gt; &lt;op&gt; &lt;attr&gt; PARTITIONS(&lt;numPartitions&gt;)
    AGG &lt;query&gt; [ GROUPBY(&lt;attr&gt;) ] GET &lt;agg-op&gt;(&lt;attr&gt;)
    IDXSCAN &lt;query&gt; &lt;attr&gt; &lt;op&gt; &lt;value&gt;
    TBLSCAN &lt;query&gt;
    &lt;tableName&gt;

&lt;agg-op&gt; = MIN | MAX | SUM | AVG | COUNT
&lt;op&gt; = &lt; | &gt; | = | != | &gt;= | &lt;= | NOOP
&lt;attrs&gt; = &lt;attr&gt; { "," &lt;attr&gt; }
&lt;numPartitions&gt; = is a number bigger than 0
&lt;numPages&gt; = is a number bigger than 0

print &lt;tableName&gt;
print attributes &lt;tableName&gt;
print index &lt;attributeName&gt; on &lt;tableName&gt;

load &lt;tableName&gt; &lt;fileName&gt;: loads the file which is in data/ folder.
help &lt;commandName&gt;
help
quit | exit
</pre><p>
<strong>Note:</strong> All commands are case-insensitive. However, all user defined strings such as table names, attribute names etc. are case-sensitive.
</p>
<h2 id="CommandExamples">Command Examples</h2>
<p>
When you first execute CLI, you need to create the system catalog using the following command. Once the catalog is created, you don't need to execute this command again.
</p>
<pre class="wiki">create catalog
</pre><p>
You can create a table and insert a record using the following commands:
</p>
<pre class="wiki">create table Employee EmpName = varchar(30), Age = int, Height = real, Salary = int
insert into Employee tuple(EmpName = sky, Age = 22, Height = 6.1, Salary = 13291)
</pre><p>
Also, CLI supports a load command that allows users to load records in a file to an existing table.
The following screenshot shows how to load records from a file, employee_5 to a table, tbl_employee, and print all records in the table.
Furthermore, it also shows how to use SELECT command with FILTER iterator.
</p>
<pre class="wiki">&gt;&gt;&gt; create table tbl_employee EmpName = varchar(30), Age = int, Height = real, Salary = int
&gt;&gt;&gt; load tbl_employee employee_5
&gt;&gt;&gt; print tbl_employee
EmpName           |  Age  |  Height    |  Salary  |  
===================================================
Anettea Belote    |  67   |  6.400000  |  75000   |  
Zina Legleiter    |  45   |  6.300000  |  150000  |  
Rena Broadus      |  68   |  5.900000  |  250000  |  
Lorriane Shimmin  |  49   |  6.600000  |  400000  |  
Elvira Binns      |  36   |  5.600000  |  200000  |  
&gt;&gt;&gt; SELECT FILTER tbl_employee WHERE Age = 45
tbl_employee.EmpName  |  tbl_employee.Age  |  tbl_employee.Height  |  tbl_employee.Salary  |  
============================================================================================
Zina Legleiter        |  45                |  6.300000             |  150000               |  
</pre><p>
<strong>Note</strong> that there are a set of dataset files under codebase/data/ directory, which are used for example programs, "cli_example_01.cc" under codebase/cli directory (and can be used for your own examples.)
The example program contains 21 cases each of which executes a set of CLI commands.
Those example cases provide more comprehensive usage of all CLI commands.
</p>
<h2 id="GettingandUsingCommandLineInterface">Getting and Using Command Line Interface</h2>
<p>
The <a class="forbidden wiki" title="no permission to view this wiki page">codebase</a> has the following source tree.
</p>
<pre class="wiki">codebase/
â”œâ”€â”€ cli
â”‚   â”œâ”€â”€ cli.cc
â”‚   â”œâ”€â”€ cli.h
â”‚   â”œâ”€â”€ cli_example_XX.cc
â”‚   â”œâ”€â”€ makefile
â”‚   â””â”€â”€ start.cc
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ ages_90
â”‚   â”œâ”€â”€ employee_5
â”‚   â”œâ”€â”€ employee_50
â”‚   â””â”€â”€ salary_5
â”œâ”€â”€ ix
â”‚   â”œâ”€â”€ ix.cc
â”‚   â”œâ”€â”€ ix.h
â”‚   â”œâ”€â”€ ixtestX.cc
â”‚   â”œâ”€â”€ ixtest_extra_X.cc
â”‚   â”œâ”€â”€ ixtest_util.h
â”‚   â””â”€â”€ makefile
â”œâ”€â”€ makefile.inc
â”œâ”€â”€ qe
â”‚   â”œâ”€â”€ makefile
â”‚   â”œâ”€â”€ qe.cc
â”‚   â”œâ”€â”€ qetestX.cc
â”‚   â”œâ”€â”€ qetest_util.h
â”‚   â””â”€â”€ qe.h
â”œâ”€â”€ rbf
â”‚   â”œâ”€â”€ makefile
â”‚   â”œâ”€â”€ pfm.cc
â”‚   â”œâ”€â”€ pfm.h
â”‚   â”œâ”€â”€ rbfm.cc
â”‚   â”œâ”€â”€ rbfm.h
â”‚   â””â”€â”€ rbftestX.cc
â”œâ”€â”€ readme.txt
â”œâ”€â”€ rm
â”‚   â”œâ”€â”€ makefile
â”‚   â”œâ”€â”€ rm.cc
â”‚   â”œâ”€â”€ rm.h
â”‚   â”œâ”€â”€ rmtest_XX.cc
â”‚   â”œâ”€â”€ rmtest_create_tables.cc
â”‚   â”œâ”€â”€ rmtest_delete_tables.cc
â”‚   â”œâ”€â”€ rmtest_extra_X.cc
â”‚   â””â”€â”€ test_util.h
â””â”€â”€ shared.h
</pre><p>
<strong>Note</strong> that the folder, codebase/data/ has csv files that contain a set of records, which can be used for your own checking purpose. 
<br />
Also, the data folder is a folder that CLI program searches for files specified in "load" commands. <br />
</p>
<p>
Goto cli folder and type the following commands
</p>
<pre class="wiki">make clean; make; ./start
</pre><p>
if you see the following outputs (the folder hierarchy will be different), you are good to go to the next step.
</p>
<pre class="wiki">************************
SecSQL CLI started
Enjoy!
&gt;&gt;&gt; 
</pre><p>
Now, put all files that you implemented(and will implement in Project4) to the corresponding folders in the above source tree. 
Then, if you type again the same command in the cli folder, you can start playing by typing <strong>"help"</strong>.
</p>
<h2 id="Acknowledgement">Acknowledgement</h2>
<p>
The CLI layer was originally written by the following three students from the last CS222 course project.   
</p>
<ul><li>Sky Faber
</li><li>Cesar Ghali
</li><li>Ekin Oguz
</li></ul><p>
We really appreciate their efforts. We also acknowledge the efforts of Sattam Alsubaiee, Young-Seok Kim, Hotham Altwaijry, and Jianfeng Jia who updated the the CLI layer in the previous quarters. 
</p>
<p>
Lastly, to reflect the changed API of this quarter project, the CLI layer has been modified by Taewoo Kim.
</p>
</div></div>
          
          <div class="trac-modifiedby">
            <span><a href="/wiki/public/wiki/cs222-2017-fall-command-line-interface?action=diff&amp;version=1" title="Version 1 by zuozhi">Last modified</a> <a class="timeline" href="/wiki/public/timeline?from=2017-11-20T21%3A40%3A44-08%3A00&amp;precision=second" title="See timeline at Nov 20, 2017 9:40:44 PM">15 months ago</a></span>
            <span class="trac-print">Last modified on Nov 20, 2017 9:40:44 PM</span>
          </div>
        
        
      </div>
      

    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="/wiki/public/wiki/cs222-2017-fall-command-line-interface?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/wiki/public/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/wiki/public/about"><strong>Trac 1.0.13</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>Mis_redirected¢DtypeEvalueôIhttp_code¢DtypeEvalueÈQdownload_complete¢DtypeEvalueõ